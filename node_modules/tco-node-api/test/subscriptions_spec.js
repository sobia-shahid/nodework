var assert = require('assert'),
  tco = require('./spec_helper');


describe('subscriptions', function(){
  var sale;
  beforeEach(function(done){
    tco.sales.create(exampleRecurringSale, function (error, data) {
      sale = data;
      done();
    });
  });

  describe('find()', function(){
    it('should find the subscription', function(done){
      tco.subscriptions.find(sale.invoices[0].subscriptions[0].id, function (error, data) {
        assert.ok(data.id);
        assert.equal(data.id, sale.invoices[0].subscriptions[0].id);
        assert.equal(true, data.active);
        done();
      });
    });
  });

  describe('stop()', function(){
    it('should stop the subscription', function(done){
      tco.subscriptions.stop(sale.invoices[0].subscriptions[0].id, function (error, data) {
        assert.equal(false, data.active);
        done();
      });
    });
  });

});
